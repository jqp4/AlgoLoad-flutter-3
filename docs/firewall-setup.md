# Настройка доступа к веб-серверу с внешних адресов

Вот пошаговая инструкция для настройки доступа к вашему веб-серверу с внешних адресов:

## Шаг 1: Проверка текущих настроек брандмауэра

```bash
firewall-cmd --list-all
```

## Шаг 2: Открытие порта 8080 в брандмауэре (если еще не открыт)

```bash
firewall-cmd --permanent --add-port=8080/tcp
firewall-cmd --reload
```

## Шаг 3: Проверка конфигурации Nginx

Убедитесь, что Nginx настроен на прослушивание не только localhost, но и внешних интерфейсов:

```bash
cat /root/nginx-files/nginx.conf
```

В файле конфигурации должна быть строка, указывающая на прослушивание всех интерфейсов:
```
listen 0.0.0.0:8080;
```
или
```
listen 8080;
```

Если такой строки нет, отредактируйте файл:

```bash
nano /root/nginx-files/nginx.conf
```

## Шаг 4: Перезапуск Nginx с обновленной конфигурацией

```bash
nginx -s reload -c /root/nginx-files/nginx.conf
```

## Шаг 5: Проверка открытых портов

```bash
ss -tulpn | grep 8080
```

## Шаг 6: Проверка доступности сервера с локального хоста

```bash
curl -I http://localhost:8080
```

## Шаг 7: Узнайте внешний IP-адрес сервера

```bash
hostname -I
```

## Шаг 8: Проверка доступности с внешнего адреса

Попробуйте обратиться к серверу с другого устройства, используя IP-адрес вашего сервера:
```
http://ВАШ_IP_АДРЕС:8080
```

## Дополнительные шаги (если доступ все еще не работает):

### Проверка iptables

```bash
iptables -L -n
```

### Проверка маршрутизации

```bash
ip route show
```

### Проверка провайдера

Убедитесь, что ваш провайдер не блокирует входящие соединения на порт 8080. Возможно, потребуется связаться с провайдером или изменить порт на более стандартный (например, 80 для HTTP или 443 для HTTPS).

### Настройка порта 80 (если требуется)

```bash
firewall-cmd --permanent --add-port=80/tcp
firewall-cmd --reload
```

Затем измените конфигурацию Nginx для использования порта 80 и перезапустите его.